# Corteza - Architecture Diagram

**Version:** 1.1 (Security Hardened)
**Last Updated:** December 22, 2024

---

## ğŸ“ System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              SLACK WORKSPACE                                 â”‚
â”‚                          (Customer's Slack Org)                              â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  /decision   â”‚     â”‚  /decisions  â”‚     â”‚ File Upload  â”‚                â”‚
â”‚  â”‚   Command    â”‚     â”‚   Command    â”‚     â”‚ (.txt/.docx) â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚         â”‚                    â”‚                     â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                     â”‚
          â”‚ HTTPS/TLS 1.3      â”‚ HTTPS/TLS 1.3       â”‚ HTTPS/TLS 1.3
          â”‚                    â”‚                     â”‚
          â–¼                    â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      RAILWAY (Hosting - US Region)                           â”‚
â”‚                    app.corteza.app (Custom Domain)                           â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     Node.js Application (Port 3000)                     â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚ â”‚
â”‚  â”‚  â”‚ Slack Routes â”‚  â”‚  API Routes  â”‚  â”‚   Dashboard  â”‚                â”‚ â”‚
â”‚  â”‚  â”‚ /slack/eventsâ”‚  â”‚ /api/*       â”‚  â”‚ /dashboard   â”‚                â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ â”‚
â”‚  â”‚         â”‚                  â”‚                  â”‚                        â”‚ â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚ â”‚
â”‚  â”‚                    â”‚                                                   â”‚ â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚ â”‚
â”‚  â”‚         â”‚  Business Logic     â”‚                                        â”‚ â”‚
â”‚  â”‚         â”‚  - Decision Logger  â”‚                                        â”‚ â”‚
â”‚  â”‚         â”‚  - AI Analysis      â”‚                                        â”‚ â”‚
â”‚  â”‚         â”‚  - Search Engine    â”‚                                        â”‚ â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  Environment Variables (Encrypted at Rest):                                 â”‚
â”‚  â€¢ SLACK_BOT_TOKEN, SLACK_SIGNING_SECRET                                    â”‚
â”‚  â€¢ MONGODB_URI, OPENAI_API_KEY, ANTHROPIC_API_KEY                           â”‚
â”‚  â€¢ JIRA_URL, JIRA_EMAIL, JIRA_API_TOKEN                                     â”‚
â”‚                                                                              â”‚
â”‚  Outbound IP: 34.145.2.57 (Static for this deployment)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                   â”‚                   â”‚
           â”‚ HTTPS/TLS         â”‚ HTTPS/TLS         â”‚ HTTPS/TLS
           â”‚                   â”‚                   â”‚
           â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MongoDB Atlas  â”‚  â”‚  OpenAI API      â”‚  â”‚  Anthropic API   â”‚
â”‚   (Database)     â”‚  â”‚  (Embeddings)    â”‚  â”‚  (Claude AI)     â”‚
â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚  Collections:    â”‚  â”‚  Model:          â”‚  â”‚  Model:          â”‚
â”‚  â€¢ decisions     â”‚  â”‚  text-embedding  â”‚  â”‚  claude-3-5-     â”‚
â”‚  â€¢ transcripts   â”‚  â”‚  -3-small        â”‚  â”‚  sonnet          â”‚
â”‚  â€¢ ai_suggestionsâ”‚  â”‚  (1536 dims)     â”‚  â”‚                  â”‚
â”‚  â€¢ ai_feedback   â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚                  â”‚  â”‚  Data Retention: â”‚  â”‚  Data Retention: â”‚
â”‚  IP Allowlist:   â”‚  â”‚  30 days         â”‚  â”‚  30 days         â”‚
â”‚  âœ… 34.145.2.57  â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚  âŒ 0.0.0.0/0    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  (removed)       â”‚
â”‚                  â”‚           â–²
â”‚  TLS 1.2+        â”‚           â”‚ HTTPS/TLS
â”‚  Encryption at   â”‚           â”‚
â”‚  rest enabled    â”‚           â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚   Jira Cloud     â”‚
                      â”‚   (Optional)     â”‚
                      â”‚                  â”‚
                      â”‚  â€¢ Fetch epic    â”‚
                      â”‚    metadata      â”‚
                      â”‚  â€¢ Post decision â”‚
                      â”‚    comments      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagrams

### **Flow 1: Logging a Decision via Slash Command**

```
â”Œâ”€â”€â”€â”€â”€â”€â”                                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚                                                          â”‚  Slack   â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜                                                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚                                                                   â”‚
   â”‚ 1. Types /decision                                                â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                                                                   â”‚
   â”‚ 2. Slack shows modal form                                         â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                                                   â”‚
   â”‚ 3. User fills & submits:                                          â”‚
   â”‚    â€¢ Decision text                                                â”‚
   â”‚    â€¢ Type (product/technical/UX)                                  â”‚
   â”‚    â€¢ Tags, alternatives, epic key                                 â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                                                                   â”‚
   â”‚                          4. POST /slack/events                    â”‚
   â”‚                          (team_id, user_id, form data)            â”‚
   â”‚                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>              â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  Railway (Corteza) â”‚   â”‚
   â”‚                                          â”‚                    â”‚   â”‚
   â”‚                                          â”‚  5. Validate input â”‚   â”‚
   â”‚                                          â”‚  6. Generate ID    â”‚   â”‚
   â”‚                                          â”‚     (workspace-    â”‚   â”‚
   â”‚                                          â”‚      scoped)       â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                      7. Fetch epic metadata (optional)            â”‚
   â”‚                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚   Jira Cloud       â”‚   â”‚
   â”‚                      <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
   â”‚                      Epic: LOK-123 data â”‚                    â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                      8. Generate embedding         â”‚              â”‚
   â”‚                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚   OpenAI API       â”‚   â”‚
   â”‚                      <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
   â”‚                      1536-dim vector    â”‚                    â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                      9. Store decision              â”‚              â”‚
   â”‚                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  MongoDB Atlas     â”‚   â”‚
   â”‚                                          â”‚                    â”‚   â”‚
   â”‚                                          â”‚  {                 â”‚   â”‚
   â”‚                                          â”‚    workspace_id,   â”‚   â”‚
   â”‚                                          â”‚    id: 1,          â”‚   â”‚
   â”‚                                          â”‚    text: "...",    â”‚   â”‚
   â”‚                                          â”‚    embedding: [...] â”‚   â”‚
   â”‚                                          â”‚  }                 â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                      10. Post to Jira (optional)    â”‚              â”‚
   â”‚                      11. Send confirmation to Slack â”‚              â”‚
   â”‚                          <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
   â”‚                                                                   â”‚
   â”‚ 12. "Decision #1 logged successfully! ğŸ‰"                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                                                   â”‚
```

### **Flow 2: AI-Powered Meeting Transcript Analysis**

```
â”Œâ”€â”€â”€â”€â”€â”€â”                                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚                                                          â”‚  Slack   â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜                                                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚                                                                   â”‚
   â”‚ 1. Uploads meeting_notes.txt to Slack channel                    â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                                                                   â”‚
   â”‚                          2. file_shared event                     â”‚
   â”‚                          (file_id, user_id, workspace_id)         â”‚
   â”‚                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>              â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  Railway (Corteza) â”‚   â”‚
   â”‚                                          â”‚                    â”‚   â”‚
   â”‚                                          â”‚  3. Download file  â”‚   â”‚
   â”‚                                          â”‚     via Slack API  â”‚   â”‚
   â”‚                          <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
   â”‚                          (full file content)                  â”‚   â”‚
   â”‚                                          â”‚                    â”‚   â”‚
   â”‚                                          â”‚  4. Store transcriptâ”‚  â”‚
   â”‚                                          â”‚     in MongoDB     â”‚   â”‚
   â”‚                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>             â”‚   â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  MongoDB Atlas     â”‚   â”‚
   â”‚                                          â”‚  meeting_transcriptsâ”‚  â”‚
   â”‚                                          â”‚  {                 â”‚   â”‚
   â”‚                                          â”‚    workspace_id,   â”‚   â”‚
   â”‚                                          â”‚    file_content    â”‚   â”‚
   â”‚                                          â”‚  }                 â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                      5. Send to Claude for analysis â”‚              â”‚
   â”‚                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  Anthropic Claude  â”‚   â”‚
   â”‚                                          â”‚                    â”‚   â”‚
   â”‚                                          â”‚  Prompt:           â”‚   â”‚
   â”‚                                          â”‚  "Extract decisionsâ”‚   â”‚
   â”‚                                          â”‚   from transcript" â”‚   â”‚
   â”‚                      <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
   â”‚                      JSON: [                                  â”‚   â”‚
   â”‚                        {decision: "...", alternatives: "..."}â”‚   â”‚
   â”‚                      ]                  â”‚                    â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                      6. Store AI suggestions        â”‚              â”‚
   â”‚                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  MongoDB Atlas     â”‚   â”‚
   â”‚                                          â”‚  ai_suggestions    â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                      7. Send interactive message    â”‚              â”‚
   â”‚                          <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
   â”‚                                                                   â”‚
   â”‚ 8. Shows suggestions with Approve/Reject/Edit buttons             â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                                                   â”‚
   â”‚ 9. User clicks "Approve"                                           â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                          (repeats Flow 1 to save decision)        â”‚
   â”‚                                                                   â”‚
```

### **Flow 3: Semantic Search Query**

```
â”Œâ”€â”€â”€â”€â”€â”€â”                                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚                                                          â”‚  Slack   â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜                                                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚                                                                   â”‚
   â”‚ 1. Types /decisions search AEM migration                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                                                                   â”‚
   â”‚                          2. POST /slack/events                    â”‚
   â”‚                          (command: "search AEM migration")        â”‚
   â”‚                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>              â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  Railway (Corteza) â”‚   â”‚
   â”‚                                          â”‚                    â”‚   â”‚
   â”‚                                          â”‚  3. Generate query â”‚   â”‚
   â”‚                                          â”‚     embedding      â”‚   â”‚
   â”‚                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>             â”‚   â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚   OpenAI API       â”‚   â”‚
   â”‚                      <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
   â”‚                      Query vector [1536 dims]                 â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                      4. Vector similarity search    â”‚              â”‚
   â”‚                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  MongoDB Atlas     â”‚   â”‚
   â”‚                                          â”‚  Vector Search     â”‚   â”‚
   â”‚                                          â”‚                    â”‚   â”‚
   â”‚                                          â”‚  $vectorSearch on  â”‚   â”‚
   â”‚                                          â”‚  'embedding' field â”‚   â”‚
   â”‚                                          â”‚  Filter: workspace â”‚   â”‚
   â”‚                      <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
   â”‚                      Top 10 matches     â”‚                    â”‚   â”‚
   â”‚                      (cosine similarity)â”‚                    â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                      5. Format results with Claude  â”‚              â”‚
   â”‚                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  Anthropic Claude  â”‚   â”‚
   â”‚                                          â”‚                    â”‚   â”‚
   â”‚                                          â”‚  Prompt:           â”‚   â”‚
   â”‚                                          â”‚  "Summarize these  â”‚   â”‚
   â”‚                                          â”‚   decisions..."    â”‚   â”‚
   â”‚                      <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
   â”‚                      Conversational response                  â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                      6. Send formatted response     â”‚              â”‚
   â”‚                          <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
   â”‚                                                                   â”‚
   â”‚ 7. "I found 3 decisions about AEM migration:                       â”‚
   â”‚     â€¢ Decision #42: We'll use one-way sync..."                     â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                                                   â”‚
```

### **Flow 4: Dashboard Access & Authentication**

```
â”Œâ”€â”€â”€â”€â”€â”€â”                                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚                                                          â”‚  Slack   â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜                                                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚                                                                   â”‚
   â”‚ 1. Types /login in Slack                                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                                                                   â”‚
   â”‚                          2. POST /slack/events                    â”‚
   â”‚                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>              â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  Railway (Corteza) â”‚   â”‚
   â”‚                                          â”‚                    â”‚   â”‚
   â”‚                                          â”‚  3. Generate token â”‚   â”‚
   â”‚                                          â”‚     (crypto random)â”‚   â”‚
   â”‚                                          â”‚  4. Store in memoryâ”‚   â”‚
   â”‚                                          â”‚     with user info â”‚   â”‚
   â”‚                                          â”‚     (5 min TTL)    â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                   â”‚                â”‚
   â”‚                      5. Send login link (ephemeral)               â”‚
   â”‚                          <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
   â”‚                                                                   â”‚
   â”‚ 6. "ğŸ” Click here to access dashboard:                             â”‚
   â”‚     https://app.corteza.app/auth/token?token=abc123..."           â”‚
   â”‚    (only visible to user, expires in 5 min)"                       â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                                                   â”‚
   â”‚ 7. User clicks link in browser                                    â”‚
   â”‚                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  Railway (Corteza) â”‚   â”‚
   â”‚                                          â”‚                    â”‚   â”‚
   â”‚                                          â”‚  8. Verify token   â”‚   â”‚
   â”‚                                          â”‚  9. Delete token   â”‚   â”‚
   â”‚                                          â”‚     (one-time use) â”‚   â”‚
   â”‚                                          â”‚  10. Create sessionâ”‚   â”‚
   â”‚                                          â”‚  11. Redirect to   â”‚   â”‚
   â”‚                                          â”‚      /dashboard    â”‚   â”‚
   â”‚                          <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
   â”‚                          302 Redirect + Set-Cookie            â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                                   â”‚
   â”‚ 12. GET /dashboard                                                â”‚
   â”‚     (with session cookie)                                         â”‚
   â”‚                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>              â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  Railway (Corteza) â”‚   â”‚
   â”‚                                          â”‚                    â”‚   â”‚
   â”‚                                          â”‚  13. Verify sessionâ”‚   â”‚
   â”‚                                          â”‚  14. Serve HTML    â”‚   â”‚
   â”‚                          <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
   â”‚                          dashboard.html + session data        â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                                   â”‚
   â”‚ 15. JavaScript loads data via API                                 â”‚
   â”‚     GET /api/decisions?workspace_id=T123                          â”‚
   â”‚                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>              â”‚
   â”‚                                                     â”‚              â”‚
   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚                                          â”‚  MongoDB Atlas     â”‚   â”‚
   â”‚                      <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
   â”‚                      JSON: [{id: 1, text: "..."}, ...]        â”‚   â”‚
   â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                                   â”‚
```

---

## ğŸ”’ Security Boundaries & Trust Zones

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          UNTRUSTED ZONE                                     â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         Internet Users                                â”‚  â”‚
â”‚  â”‚  â€¢ Slack workspace members                                            â”‚  â”‚
â”‚  â”‚  â€¢ Web browser users                                                  â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Threat: Malicious input, injection attacks, unauthorized access     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     â•‘   FIREWALL / TLS BOUNDARY   â•‘
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DMZ / APPLICATION ZONE                             â”‚
â”‚                                   â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      Railway Hosted Application                       â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Security Controls:                                                   â”‚  â”‚
â”‚  â”‚  âœ… Input validation (all user inputs sanitized)                      â”‚  â”‚
â”‚  â”‚  âœ… Slack signature verification                                      â”‚  â”‚
â”‚  â”‚  âœ… Session management (secure, HTTP-only cookies)                    â”‚  â”‚
â”‚  â”‚  âœ… HTTPS/TLS 1.3 enforced                                            â”‚  â”‚
â”‚  â”‚  âœ… Environment variables encrypted at rest                           â”‚  â”‚
â”‚  â”‚  âœ… No secrets in code (all in Railway env vars)                      â”‚  â”‚
â”‚  â”‚  âš ï¸  API endpoints accept workspace_id parameter (requires auth)      â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     â•‘   TLS / API KEY BOUNDARY    â•‘
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          TRUSTED / DATA ZONE                                â”‚
â”‚                                   â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         MongoDB Atlas                                 â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Security Controls:                                                   â”‚  â”‚
â”‚  â”‚  âœ… IP allowlist: 34.145.2.57/32 ONLY                                 â”‚  â”‚
â”‚  â”‚  âœ… TLS 1.2+ in transit                                                â”‚  â”‚
â”‚  â”‚  âœ… Encryption at rest (Atlas default)                                â”‚  â”‚
â”‚  â”‚  âœ… Authentication required (username/password)                       â”‚  â”‚
â”‚  â”‚  âœ… Workspace-level data isolation (workspace_id filter)              â”‚  â”‚
â”‚  â”‚  âŒ Field-level encryption (not implemented)                          â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Data Classification:                                                 â”‚  â”‚
â”‚  â”‚  â€¢ ğŸ”´ SENSITIVE: Decision text, alternatives, transcripts             â”‚  â”‚
â”‚  â”‚  â€¢ ğŸŸ¡ PII: User names, user IDs                                       â”‚  â”‚
â”‚  â”‚  â€¢ ğŸŸ¢ PUBLIC: Decision types, tags                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      OpenAI API (Embeddings)                          â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Security Controls:                                                   â”‚  â”‚
â”‚  â”‚  âœ… API key authentication                                             â”‚  â”‚
â”‚  â”‚  âœ… HTTPS/TLS                                                          â”‚  â”‚
â”‚  â”‚  âš ï¸  Data sent: Decision text, tags, type                             â”‚  â”‚
â”‚  â”‚  âš ï¸  Data retention: 30 days (OpenAI policy)                          â”‚  â”‚
â”‚  â”‚  âœ… NOT used for training                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Anthropic API (Claude)                             â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Security Controls:                                                   â”‚  â”‚
â”‚  â”‚  âœ… API key authentication                                             â”‚  â”‚
â”‚  â”‚  âœ… HTTPS/TLS                                                          â”‚  â”‚
â”‚  â”‚  âš ï¸  Data sent: Full transcripts, search results                      â”‚  â”‚
â”‚  â”‚  âš ï¸  Data retention: 30 days (Anthropic policy)                       â”‚  â”‚
â”‚  â”‚  âœ… NOT used for training                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Node.js Application                               â”‚
â”‚                          (Express.js Framework)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        Presentation Layer                            â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  src/views/                                                          â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ dashboard.html          Web UI for viewing/managing decisions  â”‚  â”‚
â”‚  â”‚  â””â”€â”€ ai-analytics.html       AI interaction interface               â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  src/routes/dashboard-auth.js   Authentication & session management â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         API Layer                                    â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  src/routes/                                                         â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ slack.js                Slack Bolt app, slash commands         â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ api.js                  REST API (GET/PUT/DELETE decisions)    â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ ai-decisions.js         AI transcript analysis handlers        â”‚  â”‚
â”‚  â”‚  â””â”€â”€ ai-search.js            Semantic search API                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      Middleware Layer                                â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  src/middleware/                                                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€ validation.js           Input sanitization & validation        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                       Service Layer                                  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  src/services/                                                       â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ jira.js                 Jira Cloud API integration             â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ openai.js               OpenAI embeddings generation           â”‚  â”‚
â”‚  â”‚  â””â”€â”€ anthropic.js            Claude API for AI analysis             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                       Data Layer                                     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  src/config/                                                         â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ database.js             MongoDB connection & indexes           â”‚  â”‚
â”‚  â”‚  â””â”€â”€ environment.js          Environment variable management        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Storage Schema

```
MongoDB Collections:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  decisions                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  {                                                               â”‚
â”‚    workspace_id: "T0WKH1NGL",        // ğŸ”’ Tenant isolation     â”‚
â”‚    id: 42,                            // Sequential per workspaceâ”‚
â”‚    text: "We will use...",            // ğŸ”´ SENSITIVE           â”‚
â”‚    type: "product",                   // product/technical/UX   â”‚
â”‚    epic_key: "LOK-123",                                          â”‚
â”‚    jira_data: { summary, url },                                 â”‚
â”‚    tags: ["aem", "integration"],                                â”‚
â”‚    alternatives: "Considered...",     // ğŸ”´ SENSITIVE           â”‚
â”‚    creator: "John Doe",               // ğŸŸ¡ PII                 â”‚
â”‚    user_id: "U123ABC",                // ğŸŸ¡ PII                 â”‚
â”‚    channel_id: "C123XYZ",                                        â”‚
â”‚    timestamp: "2024-12-22T10:00:00Z",                           â”‚
â”‚    embedding: [0.123, -0.456, ...]   // 1536-dim vector        â”‚
â”‚  }                                                               â”‚
â”‚                                                                  â”‚
â”‚  Indexes:                                                        â”‚
â”‚  â€¢ { workspace_id: 1, id: 1 } UNIQUE                            â”‚
â”‚  â€¢ { workspace_id: 1, timestamp: -1 }                           â”‚
â”‚  â€¢ { workspace_id: 1, type: 1 }                                 â”‚
â”‚  â€¢ { text: "text", tags: "text" }                               â”‚
â”‚  â€¢ Vector Search: embedding (cosine similarity)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  meeting_transcripts                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  {                                                               â”‚
â”‚    workspace_id: "T0WKH1NGL",        // ğŸ”’ Tenant isolation     â”‚
â”‚    transcript_id: "transcript_123",                             â”‚
â”‚    file_id: "F123ABC",                                           â”‚
â”‚    file_content: "FULL TEXT...",      // ğŸ”´ HIGHLY SENSITIVE    â”‚
â”‚    uploaded_by: "U123ABC",            // ğŸŸ¡ PII                 â”‚
â”‚    uploaded_at: "2024-12-22T10:00:00Z",                         â”‚
â”‚    suggestions_count: 3                                          â”‚
â”‚  }                                                               â”‚
â”‚                                                                  â”‚
â”‚  Indexes:                                                        â”‚
â”‚  â€¢ { workspace_id: 1, transcript_id: 1 } UNIQUE                 â”‚
â”‚  â€¢ { workspace_id: 1, uploaded_at: -1 }                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ai_suggestions                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  {                                                               â”‚
â”‚    workspace_id: "T0WKH1NGL",        // ğŸ”’ Tenant isolation     â”‚
â”‚    suggestion_id: "ai_sugg_123",                                â”‚
â”‚    meeting_transcript_id: "transcript_123",                     â”‚
â”‚    decision_text: "Extracted...",     // ğŸ”´ SENSITIVE           â”‚
â”‚    alternatives: "Extracted...",      // ğŸ”´ SENSITIVE           â”‚
â”‚    tags: ["tag1", "tag2"],                                       â”‚
â”‚    type: "product",                                              â”‚
â”‚    status: "pending",                 // pending/approved/rejectedâ”‚
â”‚    created_at: "2024-12-22T10:00:00Z"                           â”‚
â”‚  }                                                               â”‚
â”‚                                                                  â”‚
â”‚  Indexes:                                                        â”‚
â”‚  â€¢ { workspace_id: 1, suggestion_id: 1 } UNIQUE                 â”‚
â”‚  â€¢ { workspace_id: 1, status: 1 }                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ai_feedback                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  {                                                               â”‚
â”‚    workspace_id: "T0WKH1NGL",        // ğŸ”’ Tenant isolation     â”‚
â”‚    feedback_id: "feedback_123",                                 â”‚
â”‚    suggestion_id: "ai_sugg_123",                                â”‚
â”‚    action: "approved",                // approved/rejected/editedâ”‚
â”‚    original_suggestion: { ... },      // ğŸ”´ SENSITIVE           â”‚
â”‚    final_decision: { ... },           // ğŸ”´ SENSITIVE           â”‚
â”‚    created_at: "2024-12-22T10:00:00Z"                           â”‚
â”‚  }                                                               â”‚
â”‚                                                                  â”‚
â”‚  Purpose: Used for few-shot learning to improve AI accuracy     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Authentication & Authorization Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Slack OAuth (App Installation)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  1. Workspace admin installs corteza.app from Slack App Directory        â”‚
â”‚  2. Slack OAuth consent screen shows requested scopes                    â”‚
â”‚  3. Admin authorizes                                                      â”‚
â”‚  4. Slack redirects to: app.corteza.app/slack/oauth_redirect             â”‚
â”‚  5. Corteza exchanges code for bot token (xoxb-...)                      â”‚
â”‚  6. Bot token stored in Railway environment variables                    â”‚
â”‚  7. App installed workspace-wide                                          â”‚
â”‚                                                                           â”‚
â”‚  Granted Scopes (Post-Dec 22, 2024):                                     â”‚
â”‚  â€¢ channels:read, groups:read - View channel info                        â”‚
â”‚  â€¢ chat:write - Send messages                                             â”‚
â”‚  â€¢ commands - Slash commands                                              â”‚
â”‚  â€¢ files:read - Read uploaded files                                       â”‚
â”‚  â€¢ users:read - View user profiles                                        â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Dashboard Authentication (Magic Link)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  1. User types /login in Slack                                            â”‚
â”‚  2. Corteza generates one-time token:                                     â”‚
â”‚     â€¢ crypto.randomBytes(32).toString('hex')                             â”‚
â”‚     â€¢ Stored in-memory Map with user metadata                            â”‚
â”‚     â€¢ TTL: 5 minutes                                                      â”‚
â”‚     â€¢ Cleanup: Every 5 minutes, delete expired tokens                    â”‚
â”‚  3. Corteza sends ephemeral message with link:                           â”‚
â”‚     "https://app.corteza.app/auth/token?token=abc123..."                 â”‚
â”‚  4. User clicks link in browser                                           â”‚
â”‚  5. Corteza validates token:                                              â”‚
â”‚     â€¢ Check token exists in Map                                           â”‚
â”‚     â€¢ Check not expired (< 5 min old)                                     â”‚
â”‚     â€¢ Delete token (one-time use)                                         â”‚
â”‚  6. Create session:                                                       â”‚
â”‚     â€¢ req.session.user = { user_id, workspace_id, ... }                  â”‚
â”‚     â€¢ Session stored in express-session (cookie-based)                   â”‚
â”‚     â€¢ HTTP-only cookie, Secure flag, SameSite=Lax                        â”‚
â”‚  7. Redirect to /dashboard                                                â”‚
â”‚  8. All subsequent requests authenticated via session cookie             â”‚
â”‚                                                                           â”‚
â”‚  Security Properties:                                                     â”‚
â”‚  âœ… One-time use tokens (deleted after use)                              â”‚
â”‚  âœ… Short expiration (5 minutes)                                          â”‚
â”‚  âœ… Cryptographically random (32 bytes)                                   â”‚
â”‚  âœ… No password required (leverages Slack identity)                      â”‚
â”‚  âœ… Session cookies HTTP-only (no JavaScript access)                     â”‚
â”‚  âš ï¸  In-memory storage (lost on restart, acceptable for beta)            â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Workspace-Level Data Isolation                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  Tenant Model: workspace_id (Slack team_id)                              â”‚
â”‚                                                                           â”‚
â”‚  Implementation:                                                          â”‚
â”‚  1. All Slack events include team_id â†’ workspace_id                      â”‚
â”‚  2. All database writes include workspace_id field                       â”‚
â”‚  3. All database queries filter by workspace_id:                         â”‚
â”‚     â€¢ await decisionsCollection.find({ workspace_id, ... })              â”‚
â”‚  4. Dashboard accepts ?workspace_id=T123 URL parameter                   â”‚
â”‚  5. API endpoints validate workspace_id parameter                        â”‚
â”‚                                                                           â”‚
â”‚  Security Properties:                                                     â”‚
â”‚  âœ… Complete data isolation between customers                            â”‚
â”‚  âœ… Sequential IDs scoped per workspace (no ID conflicts)                â”‚
â”‚  âœ… Vector search filtered by workspace                                   â”‚
â”‚  âš ï¸  Dashboard workspace_id via URL param (requires auth improvement)    â”‚
â”‚                                                                           â”‚
â”‚  Future Enhancement: Slack OAuth for dashboard                           â”‚
â”‚  â€¢ User logs in with Slack                                                â”‚
â”‚  â€¢ Backend retrieves workspace_id from Slack user token                  â”‚
â”‚  â€¢ No need for URL parameter                                              â”‚
â”‚  â€¢ Verify user is member of workspace                                     â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ Performance & Scalability

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Current Performance Profile                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  Infrastructure:                                                          â”‚
â”‚  â€¢ Railway: Single instance, auto-scaling disabled (hobby tier)          â”‚
â”‚  â€¢ MongoDB Atlas: M0 (Free tier, 512MB storage, shared CPU)             â”‚
â”‚  â€¢ No caching layer                                                       â”‚
â”‚                                                                           â”‚
â”‚  Estimated Capacity:                                                      â”‚
â”‚  â€¢ Concurrent users: ~10-20                                               â”‚
â”‚  â€¢ Decisions: ~10,000 (limited by M0 storage)                            â”‚
â”‚  â€¢ API response time: 200-500ms (without AI calls)                       â”‚
â”‚  â€¢ AI analysis: 5-15 seconds (Claude API latency)                        â”‚
â”‚  â€¢ Vector search: 100-300ms                                               â”‚
â”‚                                                                           â”‚
â”‚  Bottlenecks:                                                             â”‚
â”‚  â€¢ MongoDB M0 throughput (100 IOPS, shared CPU)                          â”‚
â”‚  â€¢ Single Railway instance (no load balancing)                           â”‚
â”‚  â€¢ AI API rate limits (Anthropic/OpenAI)                                 â”‚
â”‚  â€¢ No request queuing for AI operations                                  â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Scaling Strategy (Future)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  Phase 1: Vertical Scaling (50-100 users)                                â”‚
â”‚  â€¢ Upgrade MongoDB to M10 (2GB RAM, dedicated)                           â”‚
â”‚  â€¢ Railway Pro plan with auto-scaling                                    â”‚
â”‚  â€¢ Add Redis for session storage & caching                               â”‚
â”‚  â€¢ Estimated cost: ~$50-100/month                                         â”‚
â”‚                                                                           â”‚
â”‚  Phase 2: Horizontal Scaling (100-500 users)                             â”‚
â”‚  â€¢ Multiple Railway instances behind load balancer                       â”‚
â”‚  â€¢ MongoDB Atlas M20 with replica set                                    â”‚
â”‚  â€¢ Redis cluster for distributed caching                                 â”‚
â”‚  â€¢ Background job queue (Bull/BullMQ) for AI operations                 â”‚
â”‚  â€¢ Estimated cost: ~$200-500/month                                        â”‚
â”‚                                                                           â”‚
â”‚  Phase 3: Enterprise Scaling (500+ users)                                â”‚
â”‚  â€¢ Kubernetes deployment (multi-region)                                  â”‚
â”‚  â€¢ MongoDB Atlas M40+ with sharding                                      â”‚
â”‚  â€¢ CDN for static assets                                                  â”‚
â”‚  â€¢ Elasticsearch for full-text search (offload from MongoDB)             â”‚
â”‚  â€¢ Separate AI processing workers                                         â”‚
â”‚  â€¢ Estimated cost: $1000+/month                                           â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Monitoring & Observability

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Current Monitoring                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  Logs:                                                                    â”‚
â”‚  â€¢ Railway deployment logs (7-30 days retention)                         â”‚
â”‚  â€¢ Console.log statements in code                                        â”‚
â”‚  â€¢ No structured logging (JSON format)                                   â”‚
â”‚  â€¢ No log aggregation service                                            â”‚
â”‚                                                                           â”‚
â”‚  Metrics:                                                                 â”‚
â”‚  â€¢ Railway basic metrics (CPU, memory, requests)                         â”‚
â”‚  â€¢ No custom business metrics                                            â”‚
â”‚  â€¢ No APM (Application Performance Monitoring)                           â”‚
â”‚                                                                           â”‚
â”‚  Health Checks:                                                           â”‚
â”‚  â€¢ GET /health endpoint returns:                                          â”‚
â”‚    { status: "ok", mongodb: "connected", timestamp }                     â”‚
â”‚  â€¢ Railway pings health endpoint every 60 seconds                        â”‚
â”‚                                                                           â”‚
â”‚  Alerting:                                                                â”‚
â”‚  â€¢ âŒ No alerts configured                                                â”‚
â”‚  â€¢ âŒ No uptime monitoring                                                â”‚
â”‚  â€¢ âŒ No error tracking (Sentry, Rollbar)                                â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Recommended Observability Stack                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  Logging:                                                                 â”‚
â”‚  â€¢ Winston or Pino for structured logging                                â”‚
â”‚  â€¢ LogDNA, Papertrail, or Datadog for log aggregation                   â”‚
â”‚  â€¢ Log levels: ERROR, WARN, INFO, DEBUG                                  â”‚
â”‚  â€¢ Correlation IDs for request tracing                                   â”‚
â”‚                                                                           â”‚
â”‚  Metrics:                                                                 â”‚
â”‚  â€¢ Custom metrics:                                                        â”‚
â”‚    - Decisions logged per hour                                            â”‚
â”‚    - AI analysis success/failure rate                                     â”‚
â”‚    - Vector search query time                                             â”‚
â”‚    - API endpoint response times                                          â”‚
â”‚  â€¢ Prometheus + Grafana (self-hosted)                                    â”‚
â”‚  â€¢ OR Datadog APM (managed service)                                      â”‚
â”‚                                                                           â”‚
â”‚  Error Tracking:                                                          â”‚
â”‚  â€¢ Sentry for error monitoring                                            â”‚
â”‚  â€¢ Automatic error grouping & notifications                              â”‚
â”‚  â€¢ Source maps for stack traces                                          â”‚
â”‚                                                                           â”‚
â”‚  Uptime Monitoring:                                                       â”‚
â”‚  â€¢ UptimeRobot or Pingdom                                                 â”‚
â”‚  â€¢ Monitor /health endpoint every 5 minutes                              â”‚
â”‚  â€¢ Alert via email/Slack if down                                          â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Key Security Improvements Implemented

**Version 1.1 (December 22, 2024):**

1. âœ… **OAuth Scope Reduction**
   - Removed: `channels:history`, `groups:history`, `im:history`, `mpim:history`
   - Impact: App can no longer read message history (only file uploads)
   - Risk reduction: Critical â†’ Low

2. âœ… **MongoDB IP Allowlist**
   - Removed: 0.0.0.0/0 (access from anywhere)
   - Added: 34.145.2.57/32 (Railway production server only)
   - Impact: Database only accessible from authorized application server
   - Risk reduction: High â†’ Low

---

## ğŸ¯ Remaining Security Roadmap

**Immediate (Pre-GA):**
1. Add audit logging for data access
2. Implement data retention policy (auto-delete old transcripts)
3. Add field-level encryption for sensitive data

**Medium-Term:**
4. Implement channel allowlist
5. Add role-based access control
6. Data residency controls (EU/US region selection)

**Long-Term:**
7. SOC 2 compliance (if required for enterprise)
8. GDPR/CCPA documentation
9. Data Processing Agreements (DPA)

---

**For Questions or Security Concerns:**
- **Technical Owner:** Cristian Tumani
- **Email:** cristiantumani@gmail.com
- **GitHub:** https://github.com/cristiantumani/corteza.app
